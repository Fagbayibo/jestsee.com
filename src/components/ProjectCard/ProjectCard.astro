---
import type { InferEntrySchema } from 'astro:content'

import Image from '@/components/Image'
import Link from '@/components/Link'
import { getTransitionName } from '@/lib/utils'

import { ArrowRight } from '../icons/ArrowRight'

interface Props
  extends Pick<
    InferEntrySchema<'projects'>,
    'title' | 'year' | 'description' | 'heroImage'
  > {
  slug: string
}

const { year, title, description, slug, heroImage } = Astro.props

const endPosition = '20px'
---

<Link href={`projects/${slug}`} class='group space-y-6'>
  <Image
    src={heroImage}
    alt={title}
    transition:name={getTransitionName(title, 'image')}
    class='transition-all duration-800 group-hover:scale-105'
    wrapperProps={{ class: 'h-[200px] rounded-lg overflow-clip' }}
  />
  <div class='flex flex-col gap-4'>
    <p class='text-sm'>{year}</p>
    <!-- should we use heading here? -->
    <h4
      class='text-lg font-semibold leading-tight tracking-wide max-sm:text-lg sm:font-medium'
      transition:name={getTransitionName(title, 'title')}
    >
      {title.replace('\\n', ' ')}
    </h4>
    <p class='text-sm tracking-wide text-slate-400'>
      {description}
    </p>
    <span
      class='link-hover-animation text-primary-gradient group-hover:link-hovered-animation w-fit text-sm'
      >Read more
      <ArrowRight
        className='inline-block text-[var(--accent-color-2)] transition-all duration-300 group-hover:ml-1'
      />
    </span>
  </div>
</Link>

<style define:vars={{ endPosition }}></style>
