---
import type { InferEntrySchema } from 'astro:content'

import Image from '@/components/Image'
import Link from '@/components/Link'
import { getTransitionName } from '@/lib/utils'

import { ArrowRight } from '../icons/ArrowRight'

interface Props
  extends Pick<
    InferEntrySchema<'projects'>,
    'title' | 'year' | 'description' | 'heroImage'
  > {
  slug: string
}

const { year, title, description, slug, heroImage } = Astro.props

const offsetEnd = '24px'
---

<Link href={`projects/${slug}`} class='group space-y-6'>
  <Image
    src={heroImage}
    alt={title}
    transition:name={getTransitionName(title, 'image')}
    class='transition-all duration-800 group-hover:scale-105'
    wrapperProps={{ class: 'h-[200px] rounded-lg overflow-clip' }}
  />
  <div class='flex flex-col gap-4'>
    <p>{year}</p>
    <!-- should we use heading here? -->
    <h4
      class='font-display text-xl font-semibold !leading-[1.2] max-sm:text-lg'
      transition:name={getTransitionName(title, 'title')}
    >
      {title.replace('\\n', ' ')}
    </h4>
    <p class='text-sm text-zinc-400'>
      {description}
    </p>
    <span
      class='link-hover-animation group-hover:link-hovered-animation w-fit text-sm text-emerald-400'
      >Read more
      <ArrowRight
        className='ml-1 inline-block transition-all duration-300 group-hover:ml-2'
      />
    </span>
  </div>
</Link>

<style define:vars={{ offsetEnd }}></style>
